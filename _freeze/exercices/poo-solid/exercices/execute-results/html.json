{
  "hash": "439bc8fb4adf7d3313bd40c7b303b2b5",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Exercices POO et SOLID\"\n---\n\n::: {.callout-tip}\n## Version interactive\n[Ouvrir ce cours dans Binder](https://mybinder.org/v2/gh/adreux/peregrinations-pythonesques/HEAD)\n:::\n\n## Exercices pratiques\n\nMettez en pratique vos connaissances avec ces exercices.\n\n## Exercice 1 : Système de bibliothèque\n\n### Contexte\nCréez un système de gestion de bibliothèque en respectant les principes SOLID.\n\n### Consignes\n\n1. Créez une classe `Book` avec les attributs : titre, auteur, ISBN, disponibilité\n2. Créez une classe `User` avec : nom, email, livres empruntés\n3. Implémentez un `BorrowManager` pour gérer les emprunts\n4. Ajoutez un système de notifications par email (utilisez le principe SRP)\n\n::: {.callout-note}\n## Conseils\n- Utilisez des dataclasses pour les modèles simples\n- Pensez à ajouter des logs avec `logging`\n- Respectez le principe de responsabilité unique\n:::\n\n### Squelette de départ\n\n::: {#9ec904ac .cell execution_count=2}\n``` {.python .cell-code}\nfrom dataclasses import dataclass\nfrom datetime import datetime\nimport logging\n\n@dataclass\nclass Book:\n    title: str\n    author: str\n    isbn: str\n    available: bool = True\n\n# À compléter...\n```\n:::\n\n\n## Exercice 2 : Système de réductions\n\n### Contexte\nImplémentez différentes stratégies de réduction en utilisant le pattern Strategy (principe OCP).\n\n### Consignes\n\n1. Créez une interface `DiscountStrategy`\n2. Implémentez au moins 3 stratégies différentes :\n   - Réduction étudiant (10%)\n   - Réduction senior (15%)\n   - Réduction fidélité (20%)\n3. Créez une classe `Order` qui utilise une stratégie de réduction\n\n::: {.callout-tip}\n## Bonus\nAjoutez une stratégie \"Sans réduction\" et une stratégie \"Black Friday\" (50%).\n:::\n\n## Exercice 3 : Système de documents\n\n### Contexte\nCréez une hiérarchie de documents en respectant le principe LSP.\n\n### Consignes\n\n1. Créez une classe abstraite `Document`\n2. Implémentez au moins 3 types de documents :\n   - `Book` (empruntable)\n   - `Magazine` (empruntable pour 7 jours max)\n   - `ArchiveDocument` (non empruntable, consultation sur place)\n3. Tous doivent être utilisables de manière polymorphique\n\n## Solutions\n\n::: {.callout-warning collapse=\"true\"}\n## Voir les solutions (essayez d'abord !)\n\n### Solution Exercice 1\n\n::: {#d070b877 .cell execution_count=3}\n``` {.python .cell-code}\nfrom dataclasses import dataclass, field\nfrom datetime import datetime\nfrom typing import List\nimport logging\n\nlogging.basicConfig(level=logging.INFO)\n\n@dataclass\nclass Book:\n    title: str\n    author: str\n    isbn: str\n    available: bool = True\n\n@dataclass\nclass User:\n    name: str\n    email: str\n    borrowed_books: List[Book] = field(default_factory=list)\n\n@dataclass\nclass Borrow:\n    book: Book\n    user: User\n    borrow_date: datetime\n    return_date: datetime = None\n\nclass BorrowManager:\n    def __init__(self):\n        self.borrows = []\n    \n    def borrow_book(self, book: Book, user: User) -> Borrow:\n        if not book.available:\n            raise ValueError(f\"Le livre '{book.title}' n'est pas disponible\")\n        \n        book.available = False\n        user.borrowed_books.append(book)\n        borrow = Borrow(book, user, datetime.now())\n        self.borrows.append(borrow)\n        \n        logging.info(f\"{user.name} a emprunté '{book.title}'\")\n        return borrow\n    \n    def return_book(self, borrow: Borrow):\n        borrow.book.available = True\n        borrow.user.borrowed_books.remove(borrow.book)\n        borrow.return_date = datetime.now()\n        \n        logging.info(f\"{borrow.user.name} a retourné '{borrow.book.title}'\")\n\nclass EmailService:\n    def send_reminder(self, user: User, book: Book):\n        logging.info(f\"Email envoyé à {user.email} : rappel pour '{book.title}'\")\n\n# Test\nbook = Book(\"1984\", \"George Orwell\", \"978-0451524935\")\nuser = User(\"Alice\", \"alice@example.com\")\nmanager = BorrowManager()\nemail_service = EmailService()\n\nborrow = manager.borrow_book(book, user)\nemail_service.send_reminder(user, book)\n```\n:::\n\n\n:::\n\n## Pour aller plus loin\n\nEssayez d'intégrer ces exercices avec :\n- Des tests unitaires (pytest)\n- Une base de données (SQLite)\n\n[Retour au cours](index.qmd){.btn .btn-secondary}\n\n",
    "supporting": [
      "exercices_files"
    ],
    "filters": [],
    "includes": {}
  }
}